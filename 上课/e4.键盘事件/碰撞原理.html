<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<style type="text/css">
#div1{width:250px; height:250px; position:fixed; margin:auto; left:0; top:0; bottom:0; right:0; background-color:red;}
#div2{width:200px; height:200px; position:absolute; left:0; top:0; background-color:blue;}
</style>
</head>
<body>
<div id="div1"></div>
<div id="div2"></div>
<script>
var oDiv1 = document.getElementById("div1");
var oDiv2 = document.getElementById("div2");
oDiv2.onmousedown = function (ev){
	ev = ev || event;
	var disX = ev.clientX - this.offsetLeft;
	var disY = ev.clientY - this.offsetTop;
	document.onmousemove = function (ev){
		ev = ev || event;
		oDiv2.style.left = ev.clientX - disX + "px";
		oDiv2.style.top = ev.clientY - disY + "px";
		if(oDiv2.offsetTop+oDiv2.offsetHeight<=oDiv1.offsetTop||oDiv2.offsetLeft+oDiv2.offsetWidth<=oDiv1.offsetLeft||oDiv2.offsetLeft>=oDiv1.offsetLeft+oDiv1.offsetWidth||oDiv2.offsetTop>=oDiv1.offsetTop+oDiv1.offsetHeight){
			oDiv1.style.backgroundColor = "red";
		}else{
			oDiv1.style.backgroundColor = "yellow";
		}
	}
	document.onmouseup = function (){
		document.onmousemove = document.onmouseup = null;
	}
	return false
}
</script>
</body>
</html>
